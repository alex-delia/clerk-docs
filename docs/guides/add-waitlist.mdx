---
title: Set up a waitlist in your Next.js app
description: Learn how to add a waitlist to your Next.js application.
---

In [**Waitlist** mode](/docs/authentication/restrictions#waitlist), users can register their interest in your app by joining a waitlist. This mode is ideal for apps in early development stages or those wanting to generate interest before launch. This guide shows you how to get Clerk integrated and how to add a waitlist to your Next.js application.

<Steps>
  ### Install `@clerk/nextjs`

  Clerk's [Next.js SDK](/docs/references/nextjs/overview) gives you access to prebuilt components, React hooks, and helpers to make user authentication easier.

  Run the following command to install the SDK:

  <CodeBlockTabs options={["npm", "yarn", "pnpm"]}>
    ```bash {{ filename: 'terminal' }}
    npm install @clerk/nextjs
    ```

    ```bash {{ filename: 'terminal' }}
    yarn add @clerk/nextjs
    ```

    ```bash {{ filename: 'terminal' }}
    pnpm add @clerk/nextjs
    ```
  </CodeBlockTabs>

  ### Set your Clerk API keys

  <If condition={experiment.enabled}>
    <ExperimentCreateAccountFromDocsQuickstart params={experiment} />
  </If>

  <If condition={!experiment.enabled}>
    <SignedIn>
      Add the following keys to your `.env.local` file. These keys can always be retrieved from the [**API Keys**](https://dashboard.clerk.com/last-active?path=api-keys) page of your Clerk Dashboard.
    </SignedIn>

    <SignedOut>
      1. In the Clerk Dashboard, navigate to the [**API Keys**](https://dashboard.clerk.com/last-active?path=api-keys){{ track: 'exp_create_account_nextjs_quickstart' }} page.
      1. In the **Quick Copy** section, copy your Clerk publishable and secret key.
      1. Paste your keys into your `.env.local` file.

      The final result should resemble the following:
    </SignedOut>
  </If>

  ```env {{ filename: '.env.local' }}
  NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY={{pub_key}}
  CLERK_SECRET_KEY={{secret}}
  ```

  ### Enable Waitlist mode

  To enable **Waitlist** mode, follow these steps:

  1. In the Clerk Dashboard, navigate to the [**Restrictions**](https://dashboard.clerk.com/last-active?path=user-authentication/restrictions) page.
  1. Under the **Sign-up modes** section, enable **Waitlist**.

  ### Configure your waitlist

  There are two ways to configure the waitlist, depending on your use case.

  - If you want to get a basic application up and running quickly, with only a waitlist hosted on the home page, select the **Basic** tab.
  - If you want to get a protected and authenticated application up and running, with sign-in, sign-up, and waitlist features, select the **Advanced** tab.

  <Tabs items={["Basic", "Advanced"]}>
    <Tab>
      ### Add `<ClerkProvider>` to your app

      The [`<ClerkProvider>`](/docs/components/clerk-provider) component wraps your app to provide active session and user context to Clerk's hooks and other components. To use the `<Waitlist />` component in your app, you must provide the `waitlistUrl` prop.

      ```tsx {{ filename: 'app/layout.tsx', mark: [6] }}
      import { ClerkProvider } from '@clerk/nextjs'
      import './globals.css'

      export default function RootLayout({ children }: { children: React.ReactNode }) {
        return (
          <ClerkProvider waitlistUrl="/waitlist">
            <html lang="en">
              <body>{children}</body>
            </html>
          </ClerkProvider>
        )
      }
      ```

      ### Add the `<Waitlist />` component

      The [`<Waitlist />`](/docs/components/waitlist) component renders a form that allows users to join for early access to your app.

      The following example includes a basic implementation of the `<Waitlist />` component hosted on the `/` route (the home page). You can use this as a starting point for your own implementation.

      ```jsx {{ filename: '/app/page.tsx' }}
      import { Waitlist } from '@clerk/nextjs'

      export default function Page() {
        return <Waitlist />
      }
      ```
    </Tab>

    <Tab>
      ### Add `clerkMiddleware()` to your app

      [`clerkMiddleware()`](/docs/references/nextjs/clerk-middleware#clerk-middleware) grants you access to user authentication state throughout your app, on any route or page. It also allows you to protect specific routes from unauthenticated users. To add `clerkMiddleware()` to your app, follow these steps:

      1. Create a `middleware.ts` file.
         - If you're using the `/src` directory, create `middleware.ts` in the `/src` directory.
         - If you're not using the `/src` directory, create `middleware.ts` in the root directory alongside `.env.local`.
      1. In your `middleware.ts` file, export the `clerkMiddleware()` helper:

         ```tsx {{ filename: 'middleware.ts' }}
         import { clerkMiddleware } from '@clerk/nextjs/server'

         export default clerkMiddleware()

         export const config = {
           matcher: [
             // Skip Next.js internals and all static files, unless found in search params
             '/((?!_next|[^?]*\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',
             // Always run for API routes
             '/(api|trpc)(.*)',
           ],
         }
         ```
      1. By default, `clerkMiddleware()` will not protect any routes. All routes are public and you must opt-in to protection for routes. See the [`clerkMiddleware()` reference](/docs/references/nextjs/clerk-middleware) to learn how to require authentication for specific routes.

      ### Add `<ClerkProvider>` and Clerk components to your app

      The [`<ClerkProvider>`](/docs/components/clerk-provider) component wraps your app to provide active session and user context to Clerk's hooks and other components. To use the `<Waitlist />` component in your app, you must provide the `waitlistUrl` prop to `<ClerkProvider>`.

      You can control which content signed-in and signed-out users can see with Clerk's [prebuilt control components](/docs/components/overview#what-are-control-components). Create a header using the following components:

      - [`<SignedIn>`](/docs/components/control/signed-in): Children of this component can only be seen while **signed in**.
      - [`<SignedOut>`](/docs/components/control/signed-out): Children of this component can only be seen while **signed out**.
      - [`<UserButton />`](/docs/components/user/user-button): Shows the signed-in user's avatar. Selecting it opens a dropdown menu with account management options.
      - [`<SignInButton />`](/docs/components/unstyled/sign-in-button): An unstyled component that links to the sign-in page. In this example, since no props or [environment variables](/docs/deployments/clerk-environment-variables) are set for the sign-in URL, this component links to the [Account Portal sign-in page](/docs/customization/account-portal/overview#sign-in).

      ```tsx {{ filename: 'app/layout.tsx', mark: [6, [9, 16], 20] }}
      import { ClerkProvider, SignInButton, SignedIn, SignedOut, UserButton } from '@clerk/nextjs'
      import './globals.css'

      export default function RootLayout({ children }: { children: React.ReactNode }) {
        return (
          <ClerkProvider waitlistUrl="/waitlist">
            <html lang="en">
              <body>
                <header>
                  <SignedOut>
                    <SignInButton />
                  </SignedOut>
                  <SignedIn>
                    <UserButton />
                  </SignedIn>
                </header>
                <main>{children}</main>
              </body>
            </html>
          </ClerkProvider>
        )
      }
      ```

      ### Build a sign-up page

      The following example demonstrates how to render the [`<SignUp />`](/docs/components/authentication/sign-up) component.

      ```tsx {{ filename: 'app/sign-up/[[...sign-up]]/page.tsx' }}
      import { SignUp } from '@clerk/nextjs'

      export default function Page() {
        return <SignUp />
      }
      ```

      ### Build a sign-in page

      The following example demonstrates how to render the [`<SignIn />`](/docs/components/authentication/sign-in) component. **Pass the `waitlistUrl` prop to the component to provide the target of the 'Waitlist' link that's rendered in the `<SignIn />` component.**

      ```tsx {{ filename: 'app/sign-in/[[...sign-in]]/page.tsx' }}
      import { SignIn } from '@clerk/nextjs'

      export default function Page() {
        return <SignIn waitlistUrl="/waitlist" />
      }
      ```

      ### Make the sign-up and sign-in routes public

      By default, `clerkMiddleware()` makes all routes public. This step is specifically for applications that have configured `clerkMiddleware()` to make [all routes protected](/docs/references/nextjs/clerk-middleware#protect-all-routes). If you have not configured `clerkMiddleware()` to protect all routes, you can skip this step.

      To make the sign-up and sign-in routes public:

      - Navigate to your `middleware.ts` file.
      - Create a new [route matcher](/docs/references/nextjs/clerk-middleware#create-route-matcher) that matches the sign-up and sign-in routes, or you can add them to an existing route matcher that is making routes public.
      - Create a check to see if the user's current route is a public route. If it is not a public route, use [`auth.protect()`](/docs/references/nextjs/auth#protect) to protect the route.

      ```tsx {{ filename: 'middleware.ts' }}
      import { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'

      const isPublicRoute = createRouteMatcher(['/sign-in(.*)', '/sign-up(.*)'])

      export default clerkMiddleware(async (auth, request) => {
        if (!isPublicRoute(request)) {
          await auth.protect()
        }
      })

      export const config = {
        matcher: [
          // Skip Next.js internals and all static files, unless found in search params
          '/((?!_next|[^?]*\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',
          // Always run for API routes
          '/(api|trpc)(.*)',
        ],
      }
      ```

      ### Update your environment variables

      In the previous steps, a `path` prop is passed to the `<SignIn />` and `<SignUp />` components. This is because the components need to know which route they are originally mounted on.

      In Next.js applications, you can either pass the `path` prop, _or_ you can define the `NEXT_PUBLIC_CLERK_SIGN_IN_URL` and `NEXT_PUBLIC_CLERK_SIGN_UP_URL` environment variables, like so:

      ```env {{ filename: '.env.local' }}
      NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
      NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up
      ```

      ### Add the `<Waitlist />` component

      The [`<Waitlist />`](/docs/components/waitlist) component renders a form that allows users to join for early access to your app.

      The following example includes a basic implementation of the `<Waitlist />` component hosted on the `/waitlist` route. You can use this as a starting point for your own implementation.

      ```jsx {{ filename: '/app/waitlist/[[...waitlist]]/page.tsx' }}
      import { Waitlist } from '@clerk/nextjs'

      export default function WaitlistPage() {
        return <Waitlist />
      }
      ```
    </Tab>
  </Tabs>

  ### Manage waitlist entries

  To manage a user on your waitlist:

  1. In the Clerk Dashboard, navigate to the [**Waitlist**](https://dashboard.clerk.com/last-active?path=waitlist) page.
  1. On the right-side of the user's row, select the menu icon (...).
  1. Select **Invite** to invite the user to your application. Select **Deny** to deny the user access to your application.
</Steps>
